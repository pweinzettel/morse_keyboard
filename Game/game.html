<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description" content="Morse Game" />
  <meta charset="utf-8">
  <title>Morse Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="Pedro Weinzettel LU9ABM" content="">
  <style>
    .container {
      max-height: 50px;
    }

    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    #deseado {
      font-family: Monospace;
      font-size: 5rem;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <button id="stop">STOP</button>
    <button id="start">START</button>
    <table>
      <tr>
        <td id = "deseado"></td>
      </tr>
      <tr>
        <td id = "desc"></td>
      </tr>
      <tr>
        <td id = "decoded"></td>
      </tr>
    </table>
    <br>
    <table>
      <tr>
        <th><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABjUExURUdwTNiMCu6tH/W4JvG0K+CeKOWgF+qyN+WiIq5bDuikFP3NTLhkDfO2Jct4CuCYC6xYEP/TVf/YZ/rBL/7HOP/MQf/WY//VWfe6Jv/RTPOzH++tGOqlEdCAC+ObC9uPC8FsDJDG1xYAAAASdFJOUwCzpuJhLIISR/27gYPL3OXPxWePqJ8AAATLSURBVFjDpZiJcqMwDIYb7gRyNAZjbGN4/6dcHbaBbI/dWGlnOgn50PFLFv34+M2aLBcib8uPRGtFPwxDr/IijVOIYRrHcRqEzuoETp31wyilRJJJIdVXBskRorNVikdiGJ/PJ7rUa9ck5WiUnqTs5X1Qoxn0RJfM/X0R1LkHyQmzlKCBaz8xCNItTEK6MwRJAoECLu8roBKTDNlOAjUbqE8ClSqAhjRQnRNIctVSuiT3HqG0k5ok56pRilyCjjDZ6JDEyJYmRUcjewQTyd3qpBbxwobITgnd7zsEPTJLlTDYhthqACoSGoQj4xy9Dyp0iExSst8Nrcz74BAP7TcnZH3xczb27HuCrC8qBOanvzI2e0OSFyUih0G90IAq/k+VdaZjxQiEJCGUNuZaNWXjrax/jWvPgSYBl5CEIKNNnmu2PL/8HCxxYmDYtOASRKaVEH2PewUa/KX+EkVd1nX0szpwaLCNk0JMT0sFmhz9dnE8pNo8z6/Xa5a1bdFUuj/4Qxx0BryZ4gd+cApzr/caVgp+0LS2enc5c+QodE827T3FG/R7l0qxt1cOXj8YwaDgqmTQywS+bgkcJuFPoENgwiIIfiFHuOcghCqAcyqCimFCGzmP/dEdVqN23t1IwmyDJMR+An9iEfg2MDDG5ysHEmEWvZHglmQgACjaksUMEeBLk5zQQdjZYTmgIGKnIqGMW05x2SmeP5jkfrXzuliDsiYZgGGBATNXW/HbbxCxN3pMxHpe58U5Zy0BrXUO3jvftiauP391CEHz+QyozdbVv3Gq/wEkfdtr6+Z1dtagO9itMUqlbVgtyh84PIjgcmPnxaL2IdfYZ5IbbqJm8zpq/FdiZl5Kz3PILhYpUH6vI4YR6BSKxvtGoMkdzYMUgpRQrKMx2EQfmj0ooI4eSa4ZegTZ5p4Gr6IgJ3reiaCWPZWvYT19MzHILTqAqCNJkviZsi77FsSbjOQk4MXg0ex4uirsXHr1rG0b9vgAonZ4yp1xWdgjM8+oRSi/UnHgoLjtPfRsG1pWbvPBYwg0MGhZQdlgoG0Wkdf31motzV95cCXKJIK0JWlHA33Cz7rudqZijONcjnvj6gxbbOAOuBSbZCHbxmMzTsevH23wpJBtLBsPXUq2tjG02n9jDN/D4vKLq8wgrL/g8u/uAZrfXPr0bzPFz/ihH6JeSAHORh3tvAXQtsW307QJDG/uDwxyP85CZ7y0X0C754omMJCCaTWslI0VPAo5ioYLSrad1p+RwhLDRt+z0CBHpB2t4g28sHdbRDt4X/CexsIgtoY6a2OBRzCQaMziHhGUDVM7O6zl1E54Q7gUODgMuUe34xdHJOta02lCY9Ldq8OG1GBENM8dCg6mMY5VHQaH4Mm2orJRiI5tWU7N66JVAIYhM+r/fH7cFmtYgH63ABDbebMvnimKu2PK+fHoOlzpOnTK6GBQAmp/R+dQ6JIv1tyyugGk68q4Fja3xfEZRm1uF1aS6L3cxDYbX1Cvq2Xd3fyJaKkGzmCWSdlBQ/+6wpfdjWcQAueFQhVBRN969PV623Q3Ol8xLRipDjKCDnD/9ShQA+vxgMKf14VJikUEwb7xJFjCjt511eluQ/LdcusSHk3LojqxVU3KP918sLuV3NsfZPDt+3Fc27oAAAAASUVORK5CYII=" alt="OK" /></th>
        <td id = "bien">0</td>
        <td id = "bienp">0%</td>
      </tr>
      <tr>
        <th><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTMt4CuytKch1C7ReD9KDDsBsDcZyDOGcHNOGEuilHP/SU+2rGPe9Mfi9K//WZP/VWv7JO//ORf/ST+2rFvzDM/m/LOCXCvKyHva5JdmLCeehD9B+CSrDk2wAAAAPdFJOUwDnT6n+bc7+GzqM6Ni553g4ALkAAAS7SURBVFjDrZiHcqs6EIYNmCLcEEiovv9z3i0SyM5J4pi7yczJZMLHln+Lz+n0ZxuynT55Voi6bsHq8XaXM5i830bxN4oYb9fr3TrnrLKrlsv0eDymaVmkHd/3aqhvdy1nid9aBQegGUGEkm58F9Pe9DwvZPOsTbBImh7wNSFovf7DpWEcW/HymztApmTLvHoAuRVcmpYJ0XJV7RdOfV9Xq663sc7lqK96BsyDDZ5EkLVIglyDaafMF1A9L5gFva4rlKOtxVDfCwyRVm+CCgpQkHerVDC+eg2tvlAdFn4X8O5X/YRBkPTRe2/Q4N8YY983r/m5pD/GXCwIW7nKJWiWpqens53P3atD4/MjkNh5euEgSMGzfcQAIVUY3RUy+iS5x+8GcK2MDwDRMxvl+9p+69B3IOkMVU3P0yaJBVRaiPL2lkNSoYxASDsIf+uu4jXVP3EgQ6tJIJm0vrAoQ73V/i2OdqhHh7FJTtFMDeh20O2tTK/WG6gWT4BkGhRnzQa6/OoPRKBXFX0AOSuU9mbOhkq8myLmONVHUjUoIBv2id/ULS7TF/V9SRC+Op5LZUe2vhn2Pku1fEzfBYYcGzwI+4wI78mrEIIx1T566lRJHDLk2zMxBWah2SN1bKBsc+E0jJJt3tZLaZvWMo1BFkFYNYXSzq8lHdkcXH0hZeEI2VGPhJpyhjCtLEged7lHQNq5SYYLMJaZUXPhFcW4RQYdqxgkF2bwJId52xWgwp5JBGKHfCBSapEkbhRYlQU5z6+o6akvGYR6tNT+mOpd3C4UoN3kEynniGpGJEUtolOD4JC3psu9JjND0iIso+OZwyAQUEjTH5sDVy/23q7tUcqtDfE9Us6lErDEDlcGzVnP89+b7Se/abteyckcMudgYXlyhTWBcGKfSdgoS0RAv5yrvUeEpUbW+IVRZBKzdhBsII+T3/GLSRSmKmb2cKViJFNGpRZgFI9BEja1vU1zjaY/vLec/qPKkwGT540tSAvuJhIALhBukFxP6mcX9unfGrYAsyagXngI7ncI1Y12CK7+Z5XpYkQOlU/TBZdy7KnBN6c4BgwZW5ZGdtHk6FK3u9SXdo7pEHpKRvA0ES16u8uXXlHt6e7OT4Yadjzj0wkjdfCcSHApq07TvbG3CCpgI3Vd13SZxE/wgaJiqlqu/qYB05Xrn05WkY6sDk8FZd2+eGBY+Mhzn4WyYp/gpQQt8v0lORApbCSNwwK71lBdVWEg1Oank7gkIQzqH6i0PptJJ1fsfryRRYqO8kS5sPBuXkYVWF/1/GPX/nJrEwkzvuaxgyB4tmlFYW9c7EMXsU6WULSb0aFG/P0DiOj4yuNNj9WJ1QeYVxK0iO/b02cm+PIE0aBeTKxOn1pLCSeXENR8DDo17NJxkOj/J9CpyUMay18dAAnUktOpRcTnoKHzBJKo7Ngeiw1Cg36Doe2PJKmNPMFJkd1wEOQSqDqQpDGNJVyRh7LdZCERqP4c1CWQOwiC3Wn44jsYmqDVwaBDyW49gfDjVThU/pFAij7m+wNdCx2SPw7hyXYkRXijIQl3SHNE13wwBuQc0XUbY75dY3+k90WVtnQ8xqETjD4nxuoYB0gd7fhGnI7am/9V+B+isc/oNbgK7wAAAABJRU5ErkJggg==" alt="Fail"></th>
        <td id = "mal">0</td>
        <td id = "malp">0%</td>
      </tr>
      <tr>
        <th><img src="data:image/png;base64,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" alt="Total"></th>
        <td id = "total">0</td>
        <td></td>
      </tr>
      <tr>
        <th><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHaUExURUdwTJh+d3FUSTQiH5+UitjTzOTn7dTO1tLIxN7c0qSbksS2qaaxvnlRPoFtZ6eek5l9c93e1dPe8J+lq6iil9fUybKhk3plXrq4sczFt5aDgXxFKdjYyt/t9OTs66eDdWlAKo9lWnNFMDsoJejw88rHu6N/bLu6s6BqSkczL6u0upqIeqqlmX1AJ8V7V7/O4pphQv////v8/SIHBOvr69vb2uXl5PT09oyFf/f4++Dg32AwEioLBJONh3BYRZaSjV89JdfU0WRGJnM+Hr1vQu/w825SPUgfCXZdTdDOzVYnDSsZF5J/cZVtTX5DIc7Lw+nr8YBrXXpYObiGT6hgNrJoO4h1ZmNHMIRfRTwXBWtOMqFaL3pkVIhpUHVTLFE3Kmo3GMO0pGhMOhgDApNoNlY9M4hkPNre6JyLfXZbRpqbmYpMKau62r/I2pZSKjIPA6+ATIZ7cTQrLfPx7uDn9KiCYNS/pu3y+qujm4NdMKB0QauXidbj/EYsI+Dt/cTHyPj3+EM/RDgdEZ54VLOuqL28usqjgAgBAMh2SaGFcM7S3ZpfQeH1/+DSv7CPdJ9+YsCplpN1Xrmbhc+vk6t3S1ZWXY1VOurh1ryMWbuUcMWab2pkZ3ByfI6VpAKoz0AAAACXdFJOUwA/nP7+GP0HDin9Pf3Da9ZWd/r+uFZ2hXj6Iv6lz6eJ2J/+3WDMrKnNv9jj5/Dq5fD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5Ke1xdAAAH6ElEQVRYw6XYh1da2RYHYBCkKfaoaEx8tuiUtxblgoB0Gx1RUVBUrCijOBEVY4FBQGOJTpxoNMn/+vY+F83MrMdFzS9Rgku+7H3uRfc5LNa/wucLBA0N7JKKitra15CO/+RSV1dXVlZWwWY3NAgEfP6/X/bPp8XsstcdHZ3/hRwfH/eOjv4F2Tx0Ls8uTO/vczh2+PO2tbVLXFRXxi5m5U2FePx6YrS395jO6MjE2lqksbGlZQydtxy7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" alt="Tiempo"></th>
        <td id = "tiempo">0</td>
        <td></td>
      </tr>
    </table>

    <div id="config">
      <br>
      <select id="ctiempo">
        <option value="30">30s</option>
        <option value="60" selected>60s</option>
        <option value="120">120s</option>
      </select>
  
      <br><input type="checkbox" id="letras" checked> <label for="letras">Letras</label>
      <br><input type="checkbox" id="numeros" checked> <label for="numeros">Numeros</label>
      <br><input type="checkbox" id="especiales"> <label for="especiales">Caracteres especiales</label>
      <br><input type="checkbox" id="proc"> <label for="proc">Procedimientos</label>
      <br><input type="checkbox" id="abbr"> <label for="abbr">Abreviaturas</label>
      <br><input type="checkbox" id="qcode"> <label for="qcode">Q-Code</label>
    </div>
  </div>

<script>
  window.onload = function () {
    var symbols = {
      letras : ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],
      numeros : ["1","2","3","4","5","6","7","8","9","0"],
      especiales : [".",",",":","?","'","-","/","(",")","\"","=","+","@"],
      proc : ["AR","AS","HH","KN","SK"],
      abbr : ["AGN","ANT","BK","CQ","DE","DX","FER","GA","GB","GE","GL","GM","GUD","HR","OM","OP","PSE","RIG","RPT","RST","RX","TX","TNX","TU","UR","WX","73"],
      qcode : ["QRL","QRM","QRN","QRO","QRP","QRS","QRT","QRX","QSB","QSL","QSO","QSY","QTH"],
      desc : {
        // procedimientos
        "AR": "Fin del mensaje",
        "AS": "Espere",
        "HH": "Erro",
        "KN": "Invitando a una estacion",
        "SK": "Fin del contacto",
        // abreviaturas
        "AGN" : "De nuevo",
        "ANT" : "Antena",
        "BK" : "Invitando al receptor a",
        "CQ" : "Llamando estacion",
        "DE" : "De",
        "DX" : "Distancia",
        "FER" : "Por",
        "GA" : "Buenas tardes",
        "GB" : "Adios",
        "GE" : "Buenas noches",
        "GL" : "Buena suerte",
        "GM" : "Buenos dias",
        "GUD" : "Bueno",
        "HR" : "Aqui",
        "OM" : "Amigo",
        "OP" : "Operador",
        "PSE" : "Por favor",
        "RIG" : "Equipo de la estacion",
        "RPT" : "Repetir",
        "RST" : "Informe de señales",
        "RX" : "Receptor",
        "TX" : "Transmisor",
        "TNX" : "Gracias",
        "TU" : "Gracias",
        "UR" : "Tu/Tuyo",
        "WX" : "Clima",
        "73" : "Saludos",
        // q-code
        "QRL" : "Frecuencia opcupada",
        "QRM" : "Interferencia",
        "QRN" : "Ruido estatico",
        "QRO" : "Aumentar la potencia",
        "QRP" : "Disminuir la potencia",
        "QRS" : "Mas lento",
        "QRT" : "Dejar de transmitir",
        "QRX" : "Espera",
        "QSB" : "Atenuacion de la señal",
        "QSL" : "Confirmacion",
        "QSO" : "Contacto",
        "QSY" : "Cambio de frecuencia",
        "QTH" : "Ubicacion",
      }
    };

    var inimsg = "Presione una tecla para comenzar"

    var deseado = document.getElementById("deseado");
    var desc = document.getElementById("desc");
    var decoded = document.getElementById("decoded");
    var bien = document.getElementById("bien");
    var mal = document.getElementById("mal");
    var bienp = document.getElementById("bienp");
    var malp = document.getElementById("malp");
    var total = document.getElementById("total");
    var tiempo = document.getElementById("tiempo");
    var ctiempo = document.getElementById("ctiempo");
    var startBtn = document.getElementById("start");
    var stopBtn = document.getElementById("stop");
    var config = document.getElementById("config");
    var options = {};
    var timer1;
    var stopped = true;
    var clear = true;
    var list = [];

    var context = new AudioContext()
    var o = null
    var g = null

    function get_symbol() {
      let res = [];
      if (document.getElementById("letras").checked) {res = res.concat(symbols.letras);}
      if (document.getElementById("numeros").checked) res = res.concat(symbols.numeros);
      if (document.getElementById("especiales").checked) res = res.concat(symbols.especiales);
      if (document.getElementById("proc").checked) res = res.concat(symbols.proc);
      if (document.getElementById("abbr").checked) res = res.concat(symbols.abbr);
      if (document.getElementById("qcode").checked) res = res.concat(symbols.qcode);
      return res;
    };
    function word_dice() {
      if (list.length == 0) {
        alert("Debe seleccionar al menos un grupo de caracteres")
        stop();
        return;
      }

      //let rnd = Math.round(Math.random() * (list.length-1));
      let date = Date.now();
      let max = date+(list.length-1)
      let min = date;
      let rnd = Math.floor(Math.random()*(max-min+1)+min)-date;
      //console.log("RND: "+rnd)
      deseado.innerHTML = list[rnd];
      if (symbols.desc[list[rnd]]) {
        desc.innerHTML = symbols.desc[list[rnd]];
      } else {
        desc.innerHTML = "";
      };
    }
    function correcto() {
      deseado.style.color = 'green';
      bien.innerHTML = parseInt(bien.innerHTML)+1;
      calc_tot();
      sonido_ok();
    }
    function incorrecto() {
      deseado.style.color = 'red';
      mal.innerHTML = parseInt(mal.innerHTML)+1;
      calc_tot();
      sonido_err();
    }
    function calc_tot() {
      total.innerHTML = parseInt(bien.innerHTML)-parseInt(mal.innerHTML);  
      bienp.innerHTML = Math.floor(parseInt(bien.innerHTML)/(parseInt(bien.innerHTML)+parseInt(mal.innerHTML))*100)+'%'; 
      malp.innerHTML = Math.ceil(parseInt(mal.innerHTML)/(parseInt(bien.innerHTML)+parseInt(mal.innerHTML))*100)+'%';
    }
    function sonido_ok(type, x){
      o = context.createOscillator()
      g = context.createGain()
      o.connect(g)
      g.connect(context.destination)

      o.type = "sine"
      o.frequency.value = 261;
      o.start(0)
      g.gain.exponentialRampToValueAtTime(
        0.0001, context.currentTime + 1.5
      )
    }
    function sonido_err(type, x){
      o = context.createOscillator()
      g = context.createGain()
      o.connect(g)
      g.connect(context.destination)

      o.type = "sawtooth"
      o.frequency.value = 150;
      o.start(0)
      g.gain.exponentialRampToValueAtTime(
        0.0001, context.currentTime + 1.5
      )
    }
    function start() {
      reset_score();
      list = get_symbol();
      tiempo.innerHTML = ctiempo.value;
      stopped = false;
      timer1 = setInterval(function(){
        if (parseInt(tiempo.innerHTML) <= 0) {
          stop();
        } else {
          tiempo.innerHTML = parseInt(tiempo.innerHTML)-1 
        }
      }, 1000);
    }
    function reset_score() {
      bien.innerHTML = "0";
      mal.innerHTML = "0";
      bienp.innerHTML = "0";
      malp.innerHTML = "0%";
      total.innerHTML = "0%";
    }
    function stop() {
      config.style.display = "block";
      stopped = true;
      clearInterval(timer1);
      decoded.innerHTML = '';
      desc.innerHTML = '';
      deseado.innerHTML = '';
    }
    function pre_start() {
      desc.innerHTML = inimsg;
      stopped = false;
      config.style.display = "none";
      lose_focus();
    }
    function lose_focus() {
      let el = document.querySelector( ':focus' );
      if( el ) el.blur();
    }

    startBtn.onclick = function(){if (stopped) pre_start()};
    stopBtn.onclick = function(){stop()};

    document.addEventListener("keypress", function onPress(event) {
      if (stopped) {
        if (event.key == "Enter") {
          pre_start()
        }
        return;
      }
      if (deseado.innerHTML == "") {
        start();
        word_dice();
        return;
      }

      if (clear) decoded.innerHTML = '';
      clear = false;

      if (decoded.innerHTML == '' && event.key == ' ') return;

      decoded.innerHTML = decoded.innerHTML.concat(event.key.toUpperCase());

      if (decoded.innerHTML.length >= deseado.innerHTML.length) {
        if (deseado.innerHTML == decoded.innerHTML) {
          correcto();
          word_dice();
        } else {
          incorrecto();
        }
        clear = true;
        setTimeout(function(){
          deseado.style.color = 'black';
        }, 500);
      }
    });
  };

</script>

</body>
</html>